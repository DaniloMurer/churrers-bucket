version: '3.3'
services:
  server:
    container_name: client
    image: docker.registry.churrer.ch/churrers-visitor:1.5.3
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.home.rule=Host(`churrer.ch`)"
      - "traefik.http.routers.home.middlewares=home-redirectscheme"
      - "traefik.http.routers.home.entrypoints=websecure"
      - "traefik.http.routers.home.tls=true"
      - "traefik.http.routers.home.tls.certresolver=myresolver"
      - "traefik.http.middlewares.home-redirectscheme.redirectscheme.scheme=https"
      - "traefik.http.middlewares.home-redirectscheme.redirectscheme.permanent=true"
    networks:
      - proxy_net
networks:
  proxy_net:
    external: true